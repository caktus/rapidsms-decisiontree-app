{% extends "tree/base.html" %}

{% load static from staticfiles %}
{% load tree_tags %}

{% block title %}Survey{% endblock %}

{% block content %}

<h2>Surveys</h2>
<ul class='horizontal'>
    <li><a href = "{% url 'add_tree' %}" >Add survey</a></li>
</ul>

<table class='list auto'>
    <thead>
        <th>ID</th>
        <th>Keyword</th>
        <th>First State</th>
        <th># Sessions</th>
        <th>Edit</th>
        <th>Delete</th>
        <th>Report</th>
    </thead>
    <tbody>
    {% for survey in object_list %}
        <tr>
            <td>{{ survey.pk }}</td>
            <td>{{ survey.trigger }}</td>
            <td>{{ survey.root_state.question.text }}</td>
            <td>{{ survey.count }}</td>
            <td>
                <a href="{% url 'insert_tree' survey.id %}" title="Edit" class="edit-link">
                    <img class='action' alt='Edit' src="{% static "icons/silk/reload.png" %}" />
                </a>
            </td>
            <td>
                <form action="{% url 'delete_tree' survey.id %}" method="post" style="border:0px;">
                    {% csrf_token %}
                    <input type="image" src="{% static "icons/silk/delete.png" %}" />
                </form>
            </td>
            <td>
                <a href="{% url 'survey-report' survey.id %}" title="Edit" class="report-link">
                    <img class='action' alt='Report' src="{% static "icons/silk/magnifier.png" %}" />                </a>
            </td>
        </tr>
    {% endfor %}
    </tbody>
</table>

{% endblock %}
